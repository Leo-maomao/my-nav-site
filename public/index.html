<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>毛毛的导航站</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- 引入 Remix Icon 图标库 -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  <!-- 引入自定义样式 -->
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="layout">
  <!-- 左侧侧边栏 -->
  <aside class="sidebar">
    <div class="side-logo">
      毛毛的导航站
    </div>

    <div class="side-avatar">
      <div class="side-avatar-top">
        <div class="side-avatar-circle">M</div>
        <div class="side-avatar-info">
          <div class="side-avatar-desc">永远相信美好的事即将发生</div>
        </div>
      </div>
      <div class="side-social-links">
         <a href="https://my-blog-site.leo-maomao.workers.dev/" class="side-social-item" target="_blank">
           <i class="ri-book-2-line"></i> 博客
         </a>
         <a href="https://github.com/Leo-maomao" class="side-social-item" target="_blank" rel="noopener noreferrer">
           <i class="ri-github-line"></i> Github
         </a>
      </div>
    </div>

    <ul class="side-menu" id="sideMenu">
      <!-- JS 渲染分类列表 -->
    </ul>

    <!-- 底部管理员工具栏 (默认隐藏) -->
    <div class="side-footer" id="sideFooter">
        <div class="side-footer-btn" id="adminFeedbackBtn" title="查看用户反馈" onclick="openAdminFeedback()">
            <i class="ri-message-3-line"></i>
        </div>
        <div class="side-footer-btn" id="configToggleBtn" title="开启/关闭配置模式">
      <i class="ri-settings-3-line"></i>
        </div>
    </div>
  </aside>

  <!-- 右侧主区域 -->
  <div class="main">
    <div class="hero-dashboard">
      <div class="hero-bg-decor"></div>
      <div class="hero-content">

        <!-- 轮播图 (New) -->
        <div class="hero-banner">
           <div class="banner-wrapper" id="bannerWrapper">
              <div class="banner-loading">正在获取最新 AI 资讯...</div>
              <div class="banner-indicators" id="bannerIndicators"></div>
           </div>
        </div>
        <!-- 中间：天气 -->
        <div class="hero-center">
             <div class="weather-block">
                <div class="weather-header">
                   <div class="weather-info-main">
                      <i id="weatherIcon" class="ri-sun-cloudy-line weather-icon-big"></i>
                      <div class="weather-text-group">
                         <div class="weather-temp-val" id="weatherTemp">--°</div>
                         <div class="weather-desc-val" id="weatherDesc">--</div>
                      </div>
                   </div>
                   <div class="weather-meta-right">
                      <div class="weather-loc-badge">
                         <i class="ri-map-pin-line"></i>
                         <span id="weatherCityName">定位中</span>
                         <span class="weather-update-time-badge" id="weatherUpdateTime">--:-- 更新</span>
                      </div>
                   </div>
                </div>
                <div class="weather-forecast">
                   <div class="weather-forecast-top">
                      <span class="weather-forecast-title" id="weatherForecastTitle"></span>
                   </div>
                   <!-- 1. 日期行：今 / 周几 -->
                   <div class="weather-forecast-labels" id="weatherChartLabels"></div>
                   <!-- 2. 最高温天气图示 -->
                   <div class="weather-forecast-row weather-forecast-icons weather-forecast-icons-high" id="weatherChartIconsHigh"></div>
                   <!-- 3. 最高温数字 -->
                   <div class="weather-forecast-row weather-forecast-temps weather-forecast-temps-high" id="weatherChartTempsHigh"></div>
                   <!-- 4-5. 中间是高/低温折线图 -->
                   <div class="weather-forecast-chart-wrap">
                      <svg id="weatherChart" class="weather-chart-svg" viewBox="0 0 100 40">
                        <defs>
                          <linearGradient id="weatherChartGradient" x1="0" y1="0" x2="0" y2="1">
                            <stop offset="0%" stop-color="#60a5fa" stop-opacity="0.9"></stop>
                            <stop offset="100%" stop-color="#60a5fa" stop-opacity="0"></stop>
                          </linearGradient>
                        </defs>
                        <polygon id="weatherChartArea" fill="url(#weatherChartGradient)" opacity="0.35" points=""></polygon>
                        <polyline id="weatherChartLineHigh" fill="none" stroke="#f97316" stroke-width="1.2" points=""></polyline>
                        <polyline id="weatherChartLineLow" fill="none" stroke="#3b82f6" stroke-width="1.2" points=""></polyline>
                      </svg>
                   </div>
                   <!-- 6. 最低温数字 -->
                   <div class="weather-forecast-row weather-forecast-temps weather-forecast-temps-low" id="weatherChartTempsLow"></div>
                   <!-- 7. 最低温天气图示 -->
                   <div class="weather-forecast-row weather-forecast-icons weather-forecast-icons-low" id="weatherChartIconsLow"></div>
                </div>
             </div>
        </div>

        <!-- 右侧：时间日期 -->
        <div class="hero-right">
          <div class="flip-clock" id="flipClock">
            <div class="flip-unit" id="flipHour">
              <div class="flip-top">00</div>
              <div class="flip-bottom">00</div>
            </div>
            <div class="flip-divider-dots">
              <span></span><span></span>
            </div>
            <div class="flip-unit" id="flipMin">
              <div class="flip-top">00</div>
              <div class="flip-bottom">00</div>
            </div>
            <div class="flip-divider-dots">
              <span></span><span></span>
            </div>
            <div class="flip-unit" id="flipSec">
              <div class="flip-top">00</div>
              <div class="flip-bottom">00</div>
            </div>
          </div>

          <div class="hero-date-container">
             <div class="hero-date-pill" id="navDate">0000 年 00 月 00 日</div>
             <div class="hero-date-pill hero-date-pill-sub" id="navExtra">今天 · 周一</div>
          </div>
        </div>
      </div>
    </div>

    <!-- 搜索区域（参考 AI 工具集顶部搜索） -->
    <section class="search-section">
      <div class="search-section-inner">
        <div class="search-tabs" id="searchTabs">
          <div class="search-tab is-active" data-key="common">常用</div>
          <div class="search-tab" data-key="search">搜索</div>
          <div class="search-tab" data-key="community">社区</div>
          <div class="search-tab" data-key="image">图片</div>
        </div>
        <div class="search-main">
          <!-- 隐形假输入框：诱导浏览器将自动填充填入这里，从而保护真实的搜索框 -->
          <div style="position: fixed; top: -9999px; left: -9999px; opacity: 0; pointer-events: none;">
             <input type="text" name="fake_username_trap" tabindex="-1" aria-hidden="true">
             <input type="password" name="fake_password_trap" tabindex="-1" aria-hidden="true">
          </div>

          <input id="searchMainInput" class="search-main-input" type="text" name="site_search_query" autocomplete="off" placeholder="站内 AI 工具搜索" />
          <div class="search-main-icon" id="searchMainButton"><i class="ri-search-line"></i></div>
          <div class="search-main-arrow" id="searchArrow"></div>
        </div>
        <div class="search-engines" id="searchEngines">
          <!-- JS 渲染搜索引擎标签 -->
        </div>
      </div>
    </section>

    <!-- AI工具榜单 -->
    <section class="ranking-section">
      <div class="ranking-header">
        <span class="tool-section-header">
          <i class="ri-bar-chart-box-line"></i>
          <span>AI工具流量榜</span>
        </span>
        <span class="ranking-source">数据来源: Tranco</span>
      </div>
      <div class="ranking-grid" id="rankingGrid">
        <!-- 聊天对话 -->
        <div class="ranking-card">
          <div class="ranking-card-header">
            <span class="ranking-card-icon"><i class="ri-message-3-line"></i></span>
            <span class="ranking-card-title">聊天对话</span>
          </div>
          <div class="ranking-list" id="rankingChat">
            <div class="ranking-loading">加载中...</div>
          </div>
        </div>
        <!-- 图片生成 -->
        <div class="ranking-card">
          <div class="ranking-card-header">
            <span class="ranking-card-icon"><i class="ri-image-2-line"></i></span>
            <span class="ranking-card-title">图片生成</span>
          </div>
          <div class="ranking-list" id="rankingImage">
            <div class="ranking-loading">加载中...</div>
          </div>
        </div>
        <!-- 视频生成 -->
        <div class="ranking-card">
          <div class="ranking-card-header">
            <span class="ranking-card-icon"><i class="ri-movie-2-line"></i></span>
            <span class="ranking-card-title">视频生成</span>
          </div>
          <div class="ranking-list" id="rankingVideo">
            <div class="ranking-loading">加载中...</div>
          </div>
        </div>
        <!-- 设计创作 -->
        <div class="ranking-card">
          <div class="ranking-card-header">
            <span class="ranking-card-icon"><i class="ri-palette-line"></i></span>
            <span class="ranking-card-title">设计创作</span>
          </div>
          <div class="ranking-list" id="rankingDesign">
            <div class="ranking-loading">加载中...</div>
          </div>
        </div>
      </div>
    </section>

    <!-- 工具分类（搜索下方整块罗列各个类别，数据来自 JS 渲染） -->
    <section class="tool-layout">
      <div class="tool-list" id="toolListContainer"></div>
    </section>
  </div>
</div>

<button class="back-to-top" id="backToTop" aria-label="回到顶部"><i class="ri-arrow-up-line"></i></button>

<!-- Feedback Button -->
<div class="feedback-btn" id="feedbackBtn" title="问题反馈">
  <i class="ri-feedback-line"></i>
</div>

<!-- Config Modal -->
<div id="configModal" class="modal-overlay">
  <div class="modal-box">
    <div class="modal-header">
      <h3 id="modalTitle">标题</h3>
      <i class="ri-close-line modal-close" id="modalCloseBtn"></i>
    </div>
    <div class="modal-body" id="modalBody">
      <!-- Inputs will be injected here -->
    </div>
    <div class="modal-footer">
      <button class="modal-btn cancel" id="modalCancelBtn">取消</button>
      <button class="modal-btn confirm" id="modalConfirmBtn">确定</button>
    </div>
  </div>
</div>

<!-- User Feedback Modal -->
<div id="feedbackModal" class="modal-overlay">
  <div class="modal-box">
    <div class="modal-header">
      <h3>问题反馈</h3>
      <i class="ri-close-line modal-close" id="feedbackModalClose"></i>
    </div>
    <div class="modal-body">
      <div class="modal-input-group">
        <label>反馈内容 / 工具推荐 <span style="color:red">*</span></label>
        <textarea id="feedbackContent" class="modal-input" placeholder="请描述您遇到的问题，或者推荐好用的 AI 工具（请提供工具名称和链接）" style="height: 120px; resize: none;" maxlength="500"></textarea>
      </div>
      <div class="modal-input-group">
        <label>联系方式 (选填)</label>
        <input id="feedbackContact" class="modal-input" placeholder="邮箱或微信号，方便我们联系您" />
      </div>
    </div>
    <div class="modal-footer">
      <button class="modal-btn cancel" id="feedbackCancelBtn">取消</button>
      <button class="modal-btn confirm" id="feedbackSubmitBtn">提交反馈</button>
    </div>
  </div>
</div>

<!-- Login Modal -->
<div id="loginModal" class="modal-overlay">
  <div class="modal-box" style="max-width: 400px;">
    <div class="modal-header">
      <h3>管理员登录</h3>
      <i class="ri-close-line modal-close" id="loginModalClose"></i>
    </div>
    <div class="modal-body">
      <div class="modal-input-group">
        <label>邮箱</label>
        <input id="loginEmail" class="modal-input" placeholder="请输入管理员邮箱" type="email" />
      </div>
      <div class="modal-input-group">
        <label>密码</label>
        <input id="loginPassword" class="modal-input" placeholder="请输入密码" type="password" />
      </div>
    </div>
    <div class="modal-footer">
      <button class="modal-btn cancel" id="loginCancelBtn">取消</button>
      <button class="modal-btn confirm" id="loginSubmitBtn">登录</button>
    </div>
  </div>
</div>

<!-- Admin Feedback List Modal -->
<div id="adminFeedbackModal" class="modal-overlay">
  <div class="modal-box" style="max-width: 600px; width: 90%;">
    <div class="modal-header">
      <h3>反馈列表</h3>
      <i class="ri-close-line modal-close" id="adminFeedbackClose"></i>
    </div>
    <div class="modal-body" style="max-height: 500px; padding: 0; overflow-y: hidden; display: flex; flex-direction: column;">
      <div id="feedbackListContainer" class="feedback-list" style="flex: 1; min-height: 200px; overflow-y: auto; padding: 0; overscroll-behavior: contain;">
        <!-- List items will be injected here -->
      </div>
    </div>
    <div class="modal-footer" style="justify-content: flex-end; align-items: center; padding-top: 12px; padding-bottom: 12px;">
      <!-- Pagination Controls -->
      <div class="pagination-controls" style="margin: 0; border: none; padding: 0; display: flex; gap: 12px; justify-content: flex-end; width: auto;">
         <select id="pageSizeSelect" class="page-size-select">
           <option value="10">10 条/页</option>
           <option value="20" selected>20 条/页</option>
           <option value="50">50 条/页</option>
           <option value="100">100 条/页</option>
         </select>
         <div class="pagination-btns">
            <button id="prevPageBtn" class="page-btn">上一页</button>
            <span id="pageInfo" class="page-info">1 / 1</span>
            <button id="nextPageBtn" class="page-btn">下一页</button>
         </div>
      </div>
    </div>
  </div>
</div>

<!-- 51.la 统计脚本 -->
<script charset="UTF-8" id="LA_COLLECT" src="https://sdk.51.la/js-sdk-pro.min.js"></script>

<!-- Supabase SDK (Global import) -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- 引入分离的 JS 文件 -->
<script src="js/initial-data.js"></script>
<script src="js/script.js"></script>

</body>
</html>
